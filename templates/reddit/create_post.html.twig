{% extends 'base.html.twig' %}

{% block title %}Créer un post Reddit{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>Créer un post Reddit</h1>
    
    <a href="{{ path('reddit_home') }}" class="btn btn-secondary mb-3">← Retour</a>
    
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

    {{ form_start(form, {'attr': {'class': 'row g-3'}}) }}
        <div class="col-md-6">
            {{ form_row(form.subreddit, {'attr': {'class': 'form-control'}}) }}
        </div>
        
        <div class="col-12">
            {{ form_row(form.title, {'attr': {'class': 'form-control'}}) }}
        </div>
        
        <div class="col-12">
            {{ form_row(form.type) }}
        </div>
        
        <div class="col-12" id="text-field">
            {{ form_row(form.text, {'attr': {'class': 'form-control'}}) }}
        </div>
        
        <div class="col-12" id="url-field" style="display: none;">
            {{ form_row(form.url, {'attr': {'class': 'form-control'}}) }}
        </div>
        
        <div class="col-12">
            {{ form_row(form.submit) }}
        </div>
    {{ form_end(form) }}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const typeRadios = document.querySelectorAll('input[name="reddit_post[type]"]');
    const textField = document.getElementById('text-field');
    const urlField = document.getElementById('url-field');
    
    typeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            if (this.value === 'text') {
                textField.style.display = 'block';
                urlField.style.display = 'none';
            } else {
                textField.style.display = 'none';
                urlField.style.display = 'block';
            }
        });
    });
});
</script>
{% endblock %}